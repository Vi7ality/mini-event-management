import{j as e,d as y,e as E,f,r as u,C as k,B as m}from"./index-DZZ-0iW7.js";import{G as _}from"./iconBase-DT_qu0DW.js";const D="_image_1g8yh_1",F={image:D},b=({image:s,name:t})=>e.jsx("div",{className:F.image,children:e.jsx("img",{src:s,alt:t})});function C(s){return _({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(s)}const I="_details_3d4vb_1",P={details:I},S=({name:s,date:t,category:a,tickets:c,price:o,description:d,setIsEditing:n})=>{const r=new Date(t).toLocaleDateString(),i=new Date(t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:P.details,children:[e.jsx("h1",{children:s}),e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",r]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Time:"})," ",i]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Category:"})," ",a]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Tickets Available:"})," ",c]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Price:"})," ",o," UAH"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Description:"})," ",d]}),e.jsxs("button",{onClick:()=>n(),children:[e.jsx(C,{}),"Edit the event"]})]})},w="_eventPage_irk1g_1",L={eventPage:w},q="_editForm_nsgje_1",N={editForm:q},T=({name:s,category:t,tickets:a,price:c,description:o,image:d,handleChange:n,handleSave:r})=>e.jsxs("form",{onSubmit:i=>{i.preventDefault(),r()},className:N.editForm,children:[e.jsx("input",{type:"text",name:"name",value:s,onChange:n,required:!0}),e.jsx("input",{type:"text",name:"category",value:t,onChange:n,required:!0}),e.jsx("input",{type:"number",name:"tickets",value:a,onChange:n,required:!0}),e.jsx("input",{type:"text",name:"price",value:c,onChange:n,required:!0}),e.jsx("input",{type:"text",name:"image",value:d,onChange:n}),e.jsx("textarea",{name:"description",value:o,onChange:n,required:!0}),e.jsx("button",{type:"submit",children:"Save"})]}),A=()=>{const{eventID:s}=y(),{data:t,isLoading:a,isError:c}=E(s),[o]=f(),[d,n]=u.useState(!1),[r,i]=u.useState({id:s||"",name:"",date:"",category:"",tickets:0,price:"",image:"",description:""}),g=()=>{t&&s&&(n(!0),i({id:s,name:t.name,date:t.date,category:t.category,tickets:t.tickets,price:t.price,image:t.image,description:t.description}))},p=l=>{const{name:j,value:v}=l.target;i(h=>({...h,[j]:v}))},x=async()=>{if(!s){m.error("Event ID is missing.");return}try{await o(r).unwrap(),n(!1),m.success("Event edited successfully!")}catch(l){l instanceof Error?m.error(`Error! ${l.message}`):m.error("An unknown error occurred.")}};return a?e.jsx("div",{children:"Loading..."}):c?e.jsx("div",{children:"Error loading event data."}):e.jsx(k,{children:t&&e.jsxs("div",{className:L.eventPage,children:[e.jsx(b,{name:t.name,image:t.image}),d?e.jsx(T,{name:r.name||"",date:r.date||"",category:r.category||"",tickets:r.tickets||0,price:r.price||"",image:r.image||"",description:r.description||"",handleChange:p,handleSave:x}):e.jsx(S,{name:t.name,description:t.description,date:t.date,category:t.category,tickets:t.tickets,price:t.price,setIsEditing:g})]})})};export{A as default};
